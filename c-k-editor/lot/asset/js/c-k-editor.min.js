!function(e,t){function n(){l.forEach(function(e){var t=a&&a[e];t&&(t.setAttribute("data-value",t.value),t.value="HTML",t.parentNode.parentNode.style.display="none")})}function r(){l.forEach(function(e){var t=a&&a[e];t&&(t.value=t.getAttribute("data-value"),t.parentNode.parentNode.style.display="",t.removeAttribute("data-value"))})}var i=function(e,t,n){var r=this;r.loader=e,r.url=t,r.t=n,r.upload=function(){return new Promise(function(e,t){r._initRequest(),r._initListeners(e,t),r._sendRequest()})},r.abort=function(){r.xhr&&r.xhr.abort()},r._initRequest=function(){r.xhr=new XMLHttpRequest;var e,t=r.url;if("object"==typeof t&&(t=t.url,e=t.headers),r.xhr.withCredentials=!0,r.xhr.open("POST",t,!0),e)for(var n in e)"function"==typeof e[n]?r.xhr.setRequestHeader(n,e[n]()):r.xhr.setRequestHeader(n,e[n]);r.xhr.responseType="json"},r._initListeners=function(e,t){var n=r.xhr,i=r.loader,a=r.t,o=a("Cannot upload file:")+" "+i.file.name;n.addEventListener("error",function(){t(o)}),n.addEventListener("abort",t),n.addEventListener("load",function(){var r=n.response;return r&&r.uploaded?void e({"default":r.url}):t(r&&r.error&&r.error.message?r.error.message:o)}),n.upload&&n.upload.addEventListener("progress",function(e){e.lengthComputable&&(i.uploadTotal=e.total,i.uploaded=e.loaded)})},r._sendRequest=function(){var e=new FormData;e.append("upload",r.loader.file),r.xhr.send(e)}},a=t.forms&&t.forms.editor,o=t.body,s=["data[content]","file[?][page][content]","page[content]"],l=["data[type]","file[?][page][type]","page[type]"];s.forEach(function(e){function t(){return this["<>"]}function s(){r(),this.editor&&this.editor.$&&this.editor.$.destroy()}function l(e){var t,r=this,a=r.cloneNode();return a.style.visibility="visible",a.style.display="block",o.appendChild(a),t=a.offsetHeight,a.parentNode&&o.removeChild(a),s.call(r),ClassicEditor.create(r,e||{}).then(function(e){var n=e.ui.view.editable.editableElement;n.style.minHeight=t+"px",n.style.resize="vertical",e.plugins.get("FileRepository").createUploadAdapter=function(t){return new i(t,e.config.get("uploadUrl"),e.t)},r.editor.$=e}),n(),r.editor.$}var c=a&&a[e];c&&(c.editor&&"function"==typeof c.editor.reset&&c.editor.reset(),c.editor={"<>":c},l.call(c),c.editor.get=t,c.editor.reset=function(){s.call(this["<>"])},c.editor.set=function(e){return l.call(this["<>"],e)})})}(window,document);