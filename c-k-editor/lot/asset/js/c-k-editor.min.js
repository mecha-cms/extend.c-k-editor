!function(e,t){function r(){l.forEach(function(e){var t=i&&i[e];t&&(t.setAttribute("data-value",t.value),t.value="HTML",t.parentNode.parentNode.style.display="none")})}function n(){l.forEach(function(e){var t=i&&i[e];t&&(t.value=t.getAttribute("data-value"),t.parentNode.parentNode.style.display="",t.removeAttribute("data-value"))})}var o=function(e,t,r){var n=this;n.loader=e,n.url=t,n.t=r,n.upload=function(){return new Promise(function(e,t){n._initRequest(),n._initListeners(e,t),n._sendRequest()})},n.abort=function(){n.xhr&&n.xhr.abort()},n._initRequest=function(){n.xhr=new XMLHttpRequest;var e,t=n.url;if("object"==typeof t&&(t=t.url,e=t.headers),n.xhr.withCredentials=!0,n.xhr.open("POST",t,!0),e)for(var r in e)"function"==typeof e[r]?n.xhr.setRequestHeader(r,e[r]()):n.xhr.setRequestHeader(r,e[r]);n.xhr.responseType="json"},n._initListeners=function(e,t){var r=n.xhr,o=n.loader,i=n.t,a=i("Cannot upload file:")+" "+o.file.name;r.addEventListener("error",function(){t(a)}),r.addEventListener("abort",t),r.addEventListener("load",function(){var n=r.response;return n&&n.uploaded?void e({"default":n.url}):t(n&&n.error&&n.error.message?n.error.message:a)}),r.upload&&r.upload.addEventListener("progress",function(e){e.lengthComputable&&(o.uploadTotal=e.total,o.uploaded=e.loaded)})},n._sendRequest=function(){var e=new FormData;e.append("upload",n.loader.file),n.xhr.send(e)}},i=t.forms&&t.forms.editor,a=t.body,d=["data[content]","file[?][page][content]","page[content]"],l=["data[type]","file[?][page][type]","page[type]"];d.forEach(function(e){function t(){return this["<>"]}function d(){n(),this.editor&&this.editor.$&&this.editor.$.destroy()}function l(e){var t,n=this,i=n.cloneNode();return i.style.visibility="visible",i.style.display="block",a.appendChild(i),t=i.offsetHeight,i.parentNode&&a.removeChild(i),d.call(n),ClassicEditor.create(n,e||{}).then(function(e){var r=e.ui.view.editable.editableElement;r.style.minHeight=1.5*t+"px",r.style.resize="vertical",e.plugins.get("FileRepository").createUploadAdapter=function(t){return new o(t,e.config.get("uploadUrl"),e.t)},n.editor.$=e}),r(),n.editor.$}var s=i&&i[e];s&&(s.editor&&"function"==typeof s.editor.reset&&s.editor.reset(),s.editor={"<>":s},l.call(s),s.editor.get=t,s.editor.reset=function(){d.call(this["<>"])},s.editor.set=function(e){return l.call(this["<>"],e)})})}(window,document);